<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="mb-8">
    <%= link_to tasks_path, class: "text-blue-600 hover:text-blue-900 text-sm font-medium" do %>
      ‚Üê Back to Tasks
    <% end %>
    <h1 class="text-3xl font-bold text-gray-900 mt-2"><%= @task.title %></h1>
  </div>

  <div class="bg-white shadow rounded-lg">
    <div class="px-6 py-4 border-b border-gray-200">
      <div class="flex items-center justify-between">
        <h2 class="text-lg font-semibold text-gray-900">Task Details</h2>
        <div class="flex items-center space-x-3">
          <!-- Status Badge -->
          <% case @task.status %>
          <% when 'pending' %>
            <span class="px-3 py-1 text-sm font-semibold rounded-full bg-yellow-100 text-yellow-800">
              Pending
            </span>
          <% when 'in_progress' %>
            <span class="px-3 py-1 text-sm font-semibold rounded-full bg-blue-100 text-blue-800">
              In Progress
            </span>
          <% when 'completed' %>
            <span class="px-3 py-1 text-sm font-semibold rounded-full bg-green-100 text-green-800">
              Completed
            </span>
          <% when 'cancelled' %>
            <span class="px-3 py-1 text-sm font-semibold rounded-full bg-gray-100 text-gray-800">
              Cancelled
            </span>
          <% end %>

          <!-- Priority Badge -->
          <% case @task.priority %>
          <% when 'urgent' %>
            <span class="px-3 py-1 text-sm font-semibold rounded-full bg-red-100 text-red-800">
              üî• URGENT
            </span>
          <% when 'high' %>
            <span class="px-3 py-1 text-sm font-semibold rounded-full bg-orange-100 text-orange-800">
              HIGH
            </span>
          <% when 'medium' %>
            <span class="px-3 py-1 text-sm font-semibold rounded-full bg-yellow-100 text-yellow-800">
              MEDIUM
            </span>
          <% when 'low' %>
            <span class="px-3 py-1 text-sm font-semibold rounded-full bg-gray-100 text-gray-800">
              LOW
            </span>
          <% end %>
        </div>
      </div>
    </div>
    
    <div class="px-6 py-6">
      <dl class="grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2">
        <div>
          <dt class="text-sm font-medium text-gray-500">Title</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @task.title %></dd>
        </div>

        <div>
          <dt class="text-sm font-medium text-gray-500">Status</dt>
          <dd class="mt-1 text-sm text-gray-900 capitalize"><%= @task.status.humanize %></dd>
        </div>

        <div>
          <dt class="text-sm font-medium text-gray-500">Priority</dt>
          <dd class="mt-1 text-sm text-gray-900 capitalize"><%= @task.priority.humanize %></dd>
        </div>

        <div>
          <dt class="text-sm font-medium text-gray-500">Due Date</dt>
          <dd class="mt-1 text-sm text-gray-900">
            <% if @task.due_date %>
              <div class="<%= 'text-red-600 font-semibold' if @task.overdue? %>">
                <%= @task.due_date.strftime('%B %d, %Y at %I:%M %p') %>
                <% if @task.overdue? %>
                  <span class="text-red-500 block text-xs">‚ö†Ô∏è OVERDUE</span>
                <% elsif @task.due_soon? %>
                  <span class="text-orange-500 block text-xs">üìÖ DUE SOON</span>
                <% end %>
              </div>
            <% else %>
              <span class="text-gray-400">No due date set</span>
            <% end %>
          </dd>
        </div>

        <div>
          <dt class="text-sm font-medium text-gray-500">Created</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @task.created_at.strftime('%B %d, %Y at %I:%M %p') %></dd>
        </div>

        <% if @task.completed_at %>
          <div>
            <dt class="text-sm font-medium text-gray-500">Completed</dt>
            <dd class="mt-1 text-sm text-gray-900"><%= @task.completed_at.strftime('%B %d, %Y at %I:%M %p') %></dd>
          </div>
        <% end %>

        <% if @task.description.present? %>
          <div class="sm:col-span-2">
            <dt class="text-sm font-medium text-gray-500">Description</dt>
            <dd class="mt-1 text-sm text-gray-900 whitespace-pre-wrap"><%= @task.description %></dd>
          </div>
        <% end %>

        <% if @task.metadata.present? && @task.metadata.any? %>
          <div class="sm:col-span-2">
            <dt class="text-sm font-medium text-gray-500">Metadata</dt>
            <dd class="mt-1">
              <div class="bg-gray-50 rounded p-3">
                <pre class="text-xs text-gray-700"><%= JSON.pretty_generate(@task.metadata) %></pre>
              </div>
            </dd>
          </div>
        <% end %>
      </dl>
    </div>
  </div>
</div>
